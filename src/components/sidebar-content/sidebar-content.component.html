<!-- Updated Angular HTML Template -->
<div class="nav-content">
  <app-custom-popup></app-custom-popup>

  <!-- Query Mode Section -->
  <div class="nav-section">
    <h3>Query Mode</h3>
    <div class="nav-options">
      <div class="nav-option" id="document" [ngClass]="{ 'active': !activeQueryId }" (click)="selectQuery($event)">
        <i class="fas fa-file-alt"></i>
        <span>Document Mode</span>
        <div class="tooltip">Query your documents</div>
      </div>
      <div class="nav-option" id="sql" [ngClass]="{ 'active': activeQueryId }" (click)="selectQuery($event)">
        <i class="fas fa-chart-line"></i>
        <span>Analytics</span>
        <div class="tooltip">Query your data analytics</div>
      </div>
    </div>
  </div>

  <!-- Analytics View Section -->
  <div class="nav-section" id="view-mode-section" [style.display]="visibilityMode">
    <h3>Analytics View Options</h3>
    <div class="nav-options">
      <div class="nav-option" id="full" data-view="full" [ngClass]="{ 'active': activeModeId }" (click)="selectMode($event)">
        <i class="fas fa-chart-bar"></i>
        <span>Full View</span>
        <div class="tooltip">Show charts and data</div>
      </div>
      <div class="nav-option" id="query" data-view="query" [ngClass]="{ 'active': !activeModeId }" (click)="selectMode($event)">
        <i class="fas fa-code"></i>
        <span>Query Only</span>
        <div class="tooltip">Show SQL queries only</div>
      </div>
    </div>
  </div>

  <!-- Chats Section -->
  <div class="nav-section chats" id="view-mode-section" style="display: block;">
    <div class="chats_header">
      <h3>Chats</h3>
      <i class="fa-solid fa-plus add_chats toggle-btn" (click)="startNewChat()" title="Add chats"></i>
    </div>

<div class="nav-options" id="chat-list">
  <ng-container *ngFor="let chat of chats | keyvalue">
    <div class="chat_name nav-option"
         [ngClass]="{ 'active': activeChatId === chat.key }"
         [attr.id]="chat.key"
         (click)="selectChat($event)">
         
      <div class="chat_name_inner">
        <div class="chat-details">
          <i class="ri-message-2-line"></i>
          <span class="chat-title">{{ chat.value }}</span>
          <div class="tooltip">{{ chat.value }}</div>
        </div>

        <div class="chat-operation-container">
          <button class="chat-operation" (click)="toggleMenu($event, chat.key)">...</button>
        </div>
      </div>

      <div class="chat-options"
           [attr.id]="'options-' + chat.key"
           [style.display]="menuState[chat.key ]">
        <button (click)="renameChat(chat.key )">Rename</button>
        <button (click)="showDeletePopup(chat.key )">Delete</button>
        <button (click)="shareChat(chat.key )">Share</button>
      </div>
    </div>
  </ng-container>
</div>

  </div>

  <!-- Action Section -->
  <div class="nav-section">
    <h3>Actions</h3>
    <div class="nav-options">
      <div class="nav-option" id="clear-chat" (click)="clearChat()">
        <i class="fas fa-trash-alt"></i>
        <span>Clear Chat</span>
        <div class="tooltip">Clear conversation history</div>
      </div>
    </div>
  </div>
</div>
